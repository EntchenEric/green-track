<mvc:View
    controllerName="greentrack.controller.Kontakte"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    displayBlock="true">

    <Page 
        showNavButton="true" 
        navButtonPress="onNavBack" 
        title="Mitarbeiter-Verzeichnis"
        backgroundDesign="List">

        <content>
            <Table 
                id="contactsTable"
                items="{view>/contacts}"
                inset="false" 
                sticky="ColumnHeaders" 
                class="sapUiSmallMarginTop" 
                growing="true" 
                growingThreshold="20">
                
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Gesamtes Team ({view>/count})" level="H2"/>
                        <ToolbarSpacer/>
                        <SearchField width="30%" placeholder="Namen suchen..." search="onSearch"/>
                        <Button icon="sap-icon://sort" tooltip="Sortieren" type="Transparent"/>
                        <Button icon="sap-icon://filter" tooltip="Filtern" type="Transparent"/>
                    </OverflowToolbar>
                </headerToolbar>
                
                <columns>
                    <Column width="4rem" hAlign="Center"><Text text=""/></Column>
                    <Column width="30%"><Text text="Name &amp; Position"/></Column>
                    <Column width="25%" minScreenWidth="Tablet" demandPopin="true"><Text text="Einsatzort / Fahrzeug"/></Column>
                    <Column width="20%" hAlign="Center" minScreenWidth="Tablet" demandPopin="true"><Text text="Status"/></Column>
                    <Column width="10%" hAlign="End"><Text text="Aktion"/></Column>
                </columns>

                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <Avatar 
                                initials="{view>initials}" 
                                backgroundColor="{view>color}" 
                                displaySize="XS"/>
                            
                            <ObjectIdentifier 
                                title="{view>name}" 
                                text="{view>role}"/>
                            
                            <VBox>
                                <ObjectStatus 
                                    text="{view>vehicleText}" 
                                    icon="{view>vehicleIcon}" 
                                    state="{view>vehicleState}"/>
                                <Text text="{view>infoText}" class="sapUiTinyMarginTop"/>
                            </VBox>
                            
                            <ObjectStatus 
                                text="{view>status}" 
                                state="{view>statusState}" 
                                icon="{view>statusIcon}" 
                                inverted="true"/>
                            
                            <HBox justifyContent="End">
                                <Button 
                                    icon="sap-icon://call" 
                                    type="Transparent" 
                                    visible="{view>phoneVisible}" 
                                    press="onPressAction" 
                                    tooltip="Anrufen"/>
                                <Button 
                                    icon="sap-icon://email" 
                                    type="Transparent" 
                                    visible="{view>emailVisible}" 
                                    press="onPressAction" 
                                    tooltip="E-Mail senden"/>
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>